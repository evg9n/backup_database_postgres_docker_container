# Бэкап базы данных PostgreSQL из docker контейнера

## Описание
Данный проект был разработан с целью автоматизировать резервное копирование баз данных PostgreSQL равзернутых в 
docker-контейнере с возможностью передать бэкап через ТГ-бота, на S3-хранилище. 
Так же возможность асимметричного шифрования с передачей публичного ключа.

## Запуск
Создайте файл **./env/.env**

### Обязательные параметры
Из файла **./env/postgres.env.template** скопируйте все переменные в файл **.env** указав описаные значения

### Настройка рабочего окружения
#### Создание и активация вирутального окружения
```bash
python3 -m venv venv
source ./venv/bin/activate
```
#### Установка зависимостей
```bash
pip install -r requirements.txt
```

### Быстрый запуск
Будет достаточно обязатательных параметров и настройки рабочего окружения
и в терминале запустить:
```bash
python3 ./main.py
```

### Запуск с отправкой бэкапа
#### Телеграм бот
Открой файл **./env/bot.env.template** и перенеси все переменые в файл **.env** с указанием описанных значений 
и выполни команду в терминале:
```bash
python3 ./main.py
```
#### s3-хранилище
Открой файл **s3.env.template** и перенеси все переменые в файл **.env** с указанием описанных значений 
и выполни команду в терминале:
```bash
python3 ./main.py
```

### Асимметричное шифрование
#### Генерация приватного и публичного ключи
Выполнить команду:
```bash
python3 ./crypto/generate_keys.py
```
Вывод:
```
Приватный ключ: {путь к првиатному ключу}
Публичный ключ: {путь к публичному ключу}
```
*Рекомендации: с помощью публичного ключа будет шифрование, понадобиться указывать путь к публичному ключу. 
А приватный ключ понадобиться для расшифрвоки файлов. Поэтому приватный ключ храните в безопасном месте.*

Открой файл **encrypto.env.template** и перенеси все переменые в файл **.env** с указанием описанных значений 
и выполни команду в терминале:
```bash
python3 ./main.py
```